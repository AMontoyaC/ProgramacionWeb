DELIMITER //
create procedure insertarCtes(in nombrecte varchar(20),in apepatcte varchar(20),in apematcte varchar(20)
,in direccioncte varchar(50)
,in ciudadcte varchar(20),in cpcte char(5),in telefonocte int,in emailcte varchar(30)
,in usuariocte varchar(20),in passwordcte varchar(32))
BEGIN
	DECLARE id_cte int;
	
	INSERT INTO CLIENTES (nombre,apepat,apemat,email,direccion,ciudad,cp,telefono)
	VALUES (nombrecte,apepatcte,apematcte,emailcte,direccioncte,ciudadcte,cpcte,telefonocte);

	SET id_cte = (select id_cliente
			  from Clientes
			  where nombre=nombrecte and apepat=apepatcte and apemat=apematcte
			  and email=emailcte and direccion=direccioncte
			  and ciudad=ciudadcte and cp=cpcte and telefono=telefonocte);


	INSERT INTO USUARIO (usuario,password,id_cliente)
	VALUES (usuariocte,passwordcte,id_cte);
END//
